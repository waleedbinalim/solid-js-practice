import"./entry-client-36655e44.js";class f extends Error{constructor(t,{status:s,stack:e}={}){super(t),this.name="ServerError",this.status=s||400,e&&(this.stack=e)}}class h extends f{constructor(t,{fieldErrors:s={},form:e,fields:n,stack:l}={}){super(t,{stack:l}),this.formError=t,this.name="FormError",this.fields=n||Object.fromEntries(typeof e<"u"?e.entries():[])||{},this.fieldErrors=s}}const a="Location",u="content-type",w="x-solidstart-response-type",y="x-solidstart-content-type",p="x-solidstart-origin",m="application/json";function i(r,t=302){let s=t;typeof s=="number"?s={status:s}:typeof s.status>"u"&&(s.status=302),r===""&&(r="/");let e=new Headers(s.headers);return e.set(a,r),new Response(null,{...s,headers:e})}const S=new Set([204,301,302,303,307,308]);function j(r){return r&&r instanceof Response&&S.has(r.status)}async function c(r,t){const s=t.headers.get(y)||t.headers.get(u)||"";if(s.includes("json"))return await t.json();if(s.includes("text"))return await t.text();if(s.includes("server-error")){const e=await t.json();return new f(e.error.message,{stack:e.error.stack,status:t.status})}else if(s.includes("form-error")){const e=await t.json();return new h(e.error.message,{fieldErrors:e.error.fieldErrors,fields:e.error.fields,stack:e.error.stack})}else if(s.includes("error")){const e=await t.json(),n=new Error(e.error.message);return e.error.stack&&(n.stack=e.error.stack),n}else{if(s.includes("response"))return t.status===204&&t.headers.get(a)?i(t.headers.get(a)):t;if(t.status===200){const e=await t.text();try{return JSON.parse(e)}catch{}}return t.status===204&&t.headers.get(a)?i(t.headers.get(a)):t}}const o=r=>{throw new Error("Should be compiled away")};function d(...r){let t,s={[p]:"client"};if(r[0]instanceof FormData)t=r[0];else{if(Array.isArray(r)&&r.length>2){let e=r[1];typeof e=="object"&&"value"in e&&"refetching"in e&&(e.value=void 0)}t=JSON.stringify(r,(e,n)=>n instanceof Headers?{$type:"headers",values:[...n.entries()]}:n instanceof Request?{$type:"request",url:n.url,method:n.method,headers:n.headers}:n),s[u]=m}return{method:"POST",body:t,headers:new Headers({...s})}}o.createFetcher=(r,t)=>{let s=function(...e){const n=t?d(e[0]):d(...e);return o.call(r,n)};return s.url=r,s.fetch=e=>o.call(r,e),s};o.call=async function(r,t){const s=new Request(new URL(r,window.location.href).href,t),e=await fetch(s);if(e.headers.get(w)==="throw")throw await c(s,e);return await c(s,e)};o.fetch=async function(r,t){if(r instanceof URL||r.startsWith("http"))return await fetch(r,t);const s=new Request(new URL(r,window.location.href).href,t);return await fetch(s)};var E=(r=>(r.Home="/",r.About="/about",r.Projects="/projects",r.Contact="/contacts",r))(E||{});export{h as F,E as P,j as i,o as s};
